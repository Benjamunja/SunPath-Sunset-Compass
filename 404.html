<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Redirecting...</title>
    <script>
        // GitHub Pages 404.html redirect hack for SPA routing
        // This ensures /pin routes work even though GitHub Pages doesn't support SPA routing natively
        
        var path = window.location.pathname;
        var search = window.location.search;
        var hash = window.location.hash;
        
        // If we're already at root, don't redirect
        if (path !== '/' && path !== '/index.html') {
            // Redirect to root with path as query parameter
            var redirectPath = '/' + (search ? '?path=' + encodeURIComponent(path + search + hash) : '?path=' + encodeURIComponent(path + hash));
            window.location.replace(redirectPath);
        } else {
            // If we're at root, try to handle the path parameter
            var urlParams = new URLSearchParams(window.location.search);
            var originalPath = urlParams.get('path');
            
            if (originalPath) {
                // Restore original path for client-side routing
                window.history.replaceState({}, '', originalPath);
            }
        }
    </script>
</head>
<body>
    <p>Redirecting...</p>
</body>
</html>

